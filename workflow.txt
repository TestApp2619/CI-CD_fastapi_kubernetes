graph TD
    subgraph Developer
        A[Code Changes] --> B(Push to GitHub: main branch)
    end

    subgraph GitHub Actions CI/CD Pipeline
        subgraph Build and Push (Job: build-and-push)
            B --> C{Trigger Workflow}
            C --> D[Checkout Code]
            D --> E[Set up QEMU]
            E --> F[Set up Docker Buildx]
            F --> G{Login to Docker Hub}
            G --> H[Build Docker Image]
            H --> I[Push Docker Image to Docker Hub]
        end

        subgraph Deploy (Job: deploy)
            I --> J{Job: build-and-push Successful}
            J --> K[Checkout Code]
            K --> L{Configure kubectl}
            L --> M[Apply Kubernetes Manifests]
        end
    end

    subgraph Kubernetes Cluster
        M --> N[FastAPI App Deployed]
        N --> O(Service Exposed: LoadBalancer/NodePort)
    end

    style A fill:#f9f,stroke:#333,stroke-width:2px
    style B fill:#ccf,stroke:#333,stroke-width:2px
    style C fill:#bbf,stroke:#333,stroke-width:2px
    style D fill:#ccf,stroke:#333,stroke-width:2px
    style E fill:#ccf,stroke:#333,stroke-width:2px
    style F fill:#ccf,stroke:#333,stroke-width:2px
    style G fill:#bbf,stroke:#333,stroke-width:2px
    style H fill:#ccf,stroke:#333,stroke-width:2px
    style I fill:#ccf,stroke:#333,stroke-width:2px
    style J fill:#bbf,stroke:#333,stroke-width:2px
    style K fill:#ccf,stroke:#333,stroke-width:2px
    style L fill:#bbf,stroke:#333,stroke-width:2px
    style M fill:#ccf,stroke:#333,stroke-width:2px
    style N fill:#cfc,stroke:#333,stroke-width:2px
    style O fill:#cfc,stroke:#333,stroke-width:2px
